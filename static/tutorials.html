<!DOCTYPE html>
<html>
  <head>
    {% include 'header.html' %}   
    {% include 'scripts.html' %}   
  </head>
  <body>
    {% include 'nav.html' %}   

    <div class="container">
      {% include 'hero.html' %}   
      <div class="row">
        <div class="span8">
          <h2>Tutorials!</h2>
          <p class ="lead" align="justify">This page has a bunch of tutorials with step by step procedures and code snippets to setup socketbox for your application.</p>
          <h3>Here We Go! </h3>
          <p class="lead" align="justify"><b>Step 1 :</b> Register with SocketBox in the registration window on the right and get your login and password .</p>
          <p class="lead" align="justify"><b>Step 2 :</b> Login to SocketBox with your username and password and enter into the Dashboard .</p>
          <p class="lead" align="justify"><b>Step 3 :</b> Create a New Application and Get your <b>API key</b> and <b>secret key</b> for your application .</p>
          <p class="lead" align="justify"><b>Step 4 :</b> Use these keys for making and receiving push notificatiosn and the server and client end respectively .</p>
          <h3>Client End </h3>
          <p class ="lead" align="justify">SocketBox supports javascript in the client end . Once you have your API key and secret key , the following steps help setup the client : </p>
          <p class="lead" align="justify"><b>Step 1 :</b> Include the socketbox.js library file in your client HTML page .</p>
          <pre class="prettyprint">
            &lt;script src="http://socketbox.in/js/socketbox.js"&gt;&lt;/script&gt;
          </pre>
          <p class="lead" align="justify"><b>Step 2 :</b> Open a connection to pusher. Use the API key you generated earlier over here .</p>
          <pre class="prettyprint">
            var socket = new SocketBox('API_KEY');
          </pre>
          <p class="lead" align="justify"><b>Step 3 :</b>Subscribe to a channel . In socketbox for every socket there is a channel . You may have multiple channels where different clients subscribe to different channels so that only particular messages reach particular clients .</p>
          <pre class="prettyprint">
          socket.subscribe('CHANNEL_NAME');
          </pre>
          <p class="lead" align="justify"><b>Step 4 :</b>Listen to a particular event in a channel . Each channel can have multiple events . So you may listen for only a particular event in a channel . Ensure both client and server have the same CHANNEL_NAME and EVENT_NAME to receive all messages.</p>
          <pre class="prettyprint">
              socket.bind('EVENT_NAME', function(data) {
                      console.log(data);
              });          
          </pre>
          <p class="lead" align="justify"><b>NOTE:</b>This is a callback function which returns data which is the data that is sent from the server in JSON format.</p>
          <p class="lead" align="justify"><b>Complete Code :</b></p>
          <pre class="prettyprint">
            &lt;script src="http://socketbox.in/js/socketbox.js"&gt;&lt;/script&gt;
            var socket = new SocketBox('API_KEY');
            socket.subscribe('CHANNEL_NAME');
            socket.bind('EVENT_NAME', function(data) {
                      console.log(data);
            });          
          </pre>

          <h3>Server End </h3>
          <p class ="lead" align="justify">The server end basically requires you to make a POST request to the socketbox server (server.socketbox.in) and provide the required data as part of the POST request. The data required by the POST request are :</p>
          <p class ="lead" align="justify">
            <ul>
              <li>API Key(apikey)</li>
              <li>Secret Key(secret)</li>
              <li>Event Name(event)</li>
              <li>Channel Name(channel)</li>
              <li>Data to be sent(data)</li>
            </ul>
          </p>  
          <p class="lead" align="justify"><b>Here are some code snippets for various programming languages:</b></p>
          <h3>Django! </h3>
          <pre class="prettyprint">
            def sock_test(request):
              event = "EVENT_NAME"
              apikey="API_KEY"
              secret="SECRET_KEY"
              channel = "CHANNEL_NAME"
              data = {
                'name' : 'Mathew',
                'age' : '34',
              }
              socket_data = {
                'event' : event,
                'channel' : channel,
                'data' : simplejson.dumps(data),
                'apikey' : apikey,
                'secret' : secret,
              }

              host = 'http://server.socketbox.in:8000';
              try:
                result = urllib2.urlopen(host + '/post/', urllib.urlencode(socket_data))
                content = result.read()
              except Exception:
                content = "FAIL"
              return HttpResponse(content)          
          </pre>

        </div>
        <h3>PHP! </h3>
        <pre class="prettyprint">
          <?php
            # Our new data
            $dat=array('name' => 'prashanth' , 'age' => 21);
            $dat=json_encode($dat);
            $data = array(
                'event' => 'hello',
                'channel' => 'prash',
                'data' => $dat,
                'apikey' => 'BU4IBO0JTE',
                'secret' => 'XDZK7RMAC3',
                
            );

            # Create a connection
            $url = 'http://socketbox.insigniadevs.com:8000/post/';
            $ch = curl_init($url);

            # Form data string
            $postString = http_build_query($data, '', '&');
            # Setting our options
            curl_setopt($ch, CURLOPT_POST, 1);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $postString);

            # Get the response
            $response = curl_exec($ch);
          ?>
        </pre>
        <div class="span4">
          <form class="form-signin">
            <h2 class="form-signin-heading">Register Now!</h2>
            <input type="text" class="input-block-level" placeholder="Name">
            <input type="text" class="input-block-level" placeholder="Email address">
            <input type="password" class="input-block-level" placeholder="Password">
            <input type="password" class="input-block-level" placeholder="Confirm Password">
            <!--<label class="checkbox">
              <input type="checkbox" value="remember-me"> Remember me
            </label>-->
            <button class="btn btn-large btn-primary" type="submit">Register</button>
          </form>
        </div>
      </div>
    </div>

    
  </body>
</html>